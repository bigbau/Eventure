Phase: oftenNearRelation
Input: Token Lookup OftenNearInd
Options: control = all

Rule: OftenNearRelation1
(

({Token.category == NN} | {Token.category == NNP} | {Token.category == NNPS} | {Token.category == NNS} | {Token.category == NP} | {Token.category == NPS}):entity1
({OftenNearInd}):oftennearind
({Token.string != ".", Token.string != ",", Token.string != "?", Token.string != "!"})*
({Token.category == NN} | {Token.category == NNP} | {Token.category == NNPS} | {Token.category == NNS} | {Token.category == NP} | {Token.category == NPS}):entity2

):OftenNearRelation1
-->
:OftenNearRelation1
  {
    gate.AnnotationSet matchedEntities=(gate.AnnotationSet) bindings.get("entity1");
    Annotation entity1=matchedEntities.iterator().next();
    gate.AnnotationSet matchedEntities2=(gate.AnnotationSet) bindings.get("entity2");
    Annotation entity2=matchedEntities2.iterator().next();
    gate.AnnotationSet matchedAnns= (gate.AnnotationSet) bindings.get("OftenNearRelation1");      
    gate.FeatureMap newFeatures= Factory.newFeatureMap();
    newFeatures.put("Entity1",entity1.getFeatures().get("string"));
    newFeatures.put("Entity2",entity2.getFeatures().get("string"));
    newFeatures.put("rule","OftenNearRelation1");
    annotations.add(matchedAnns.firstNode(),matchedAnns.lastNode(),"OftenNearRelation", newFeatures);
  }