Phase: madeOfRelation
Input: Token Lookup MadeOfInd
Options: control = all

Rule: MadeOfRelation1
(

({Token.category == NN} | {Token.category == NNP} | {Token.category == NNPS} | {Token.category == NNS} | {Token.category == NP} | {Token.category == NPS}):entity1
({MadeOfInd, Token.string != "form", Token.string != "forms", Token.string != "become", Token.string != "becomes"}):madeofind
({Token.string != ".", Token.string != ",", Token.string != "?", Token.string != "!"})*
({Token.category == NN} | {Token.category == NNP} | {Token.category == NNPS} | {Token.category == NNS} | {Token.category == NP} | {Token.category == NPS}):entity2

):MadeOfRelation1
-->
:MadeOfRelation1
  {
    gate.AnnotationSet matchedEntities=(gate.AnnotationSet) bindings.get("entity1");
    Annotation entity1=matchedEntities.iterator().next();
    gate.AnnotationSet matchedEntities2=(gate.AnnotationSet) bindings.get("entity2");
    Annotation entity2=matchedEntities2.iterator().next();
    gate.AnnotationSet matchedAnns= (gate.AnnotationSet) bindings.get("MadeOfRelation1");      
    gate.FeatureMap newFeatures= Factory.newFeatureMap();
    newFeatures.put("Entity1",entity1.getFeatures().get("string"));
    newFeatures.put("Entity2",entity2.getFeatures().get("string"));
    newFeatures.put("rule","MadeOfRelation1");
    annotations.add(matchedAnns.firstNode(),matchedAnns.lastNode(),"MadeOfRelation", newFeatures);
  }
  
Rule: MadeOfRelation2
(

({Token.category == NN} | {Token.category == NNP} | {Token.category == NNPS} | {Token.category == NNS} | {Token.category == NP} | {Token.category == NPS}):entity2
({Token.string == "form"} | {Token.string == "forms"} | {Token.string == "become"} | {Token.string == "becomes"}):madeofind
({Token.string != ".", Token.string != ",", Token.string != "?", Token.string != "!"})*
({Token.category == NN} | {Token.category == NNP} | {Token.category == NNPS} | {Token.category == NNS} | {Token.category == NP} | {Token.category == NPS}):entity1

):MadeOfRelation2
-->
:MadeOfRelation2
  {
    gate.AnnotationSet matchedEntities=(gate.AnnotationSet) bindings.get("entity1");
    Annotation entity1=matchedEntities.iterator().next();
    gate.AnnotationSet matchedEntities2=(gate.AnnotationSet) bindings.get("entity2");
    Annotation entity2=matchedEntities2.iterator().next();
    gate.AnnotationSet matchedAnns= (gate.AnnotationSet) bindings.get("MadeOfRelation2");      
    gate.FeatureMap newFeatures= Factory.newFeatureMap();
    newFeatures.put("Entity1",entity1.getFeatures().get("string"));
    newFeatures.put("Entity2",entity2.getFeatures().get("string"));
    newFeatures.put("rule","MadeOfRelation2");
    annotations.add(matchedAnns.firstNode(),matchedAnns.lastNode(),"MadeOfRelation", newFeatures);
  }